<!--@if(!$module_info->document_title_format)-->
    {@ $module_info->document_title_format = 'h4'}
<!--@end-->

<!-- 글 내용 보여주기 -->
<div class="boardRead">
    <div class="originalContent">
		<div class="readHeader">
            <div class="dateLabel">
              <div class="dateMonth">{$oDocument->getRegdate('Y.m')}</div>
              <div class="dateDay">{$oDocument->getRegdate('d')}</div>
            </div>
            <div class="titleAndUser">

                <div class="title">
                    <div class="title1">
                    <{$module_info->document_title_format}><a href="{$oDocument->getPermanentUrl()}" >{$oDocument->getTitle()}</a></{$module_info->document_title_format}>
                    </div>
                    <div class="userInfo">
                        <!--@if(!$oDocument->getMemberSrl())-->
                            <div class="author">
                            <!--@if($oDocument->isExistsHomepage())-->
                                <a href="{$oDocument->getHomepageUrl()}" onclick="window.open(this.href);return false;">{$oDocument->getNickName()}</a>
                            <!--@else-->
                                {$oDocument->getNickName()}
                            <!--@end-->
                            </div>
                        <!--@else-->
                            <div class="author"><span class="member_{$oDocument->get('member_srl')}">{$oDocument->getNickName()}</span></div>
                        <!--@end-->
                    </div>

                    <div class="title2">
                    <div class="ca">
                    <!--@if($module_info->use_category == "Y" && $oDocument->get('category_srl'))-->
                    <span class="category"><a href="{getUrl('category',$oDocument->get('category_srl'), 'document_srl', '')}">Category : {$category_list[$oDocument->get('category_srl')]->title}</a>
                    </span>
                    <!--@end-->
                    <span class="uri"><a href="{$oDocument->getPermanentUrl()}">{$oDocument->getPermanentUrl()}</a></span></div>
                    <span class="date">
                    <strong>{$oDocument->getRegdate('Y.F.d.l')}</strong>{$oDocument->getRegdate('H:i')}</span>
                    <!--@if($grant->is_admin || $module_info->display_ip_address!='N')-->
                    <span class="ip">{$oDocument->getIpaddress()}</span>
                    <!--@end-->

                    <!--@if($grant->write_comment && $oDocument->allowComment()) -->
                    <span class="replyCount">{$oDocument->getCommentcount()} Comments</a></span><!--@end-->
                    <!--@if($oDocument->allowTrackback() && $oDocument->getTrackbackCount() )-->
                    <span class="trackbackCount"><a href="#" onclick="toggle_object('blog_trackback_{$oDocument->document_srl}'); return false;" title="{$lang->trackback}">{$oDocument->getTrackbackCount()} Trackback</a></span><!--@end-->

                    <span class="readedCount">{$oDocument->get('readed_count')} Views</span>

                    <!--@if($oDocument->get('voted_count')!=0 || $oDocument->get('blamed_count')!=0)-->
                    <span class="votedCount"><FONT COLOR="#FF6600">{$oDocument->get('voted_count')}</FONT> Voted / {$oDocument->get('blamed_count')} Devoted</span><!--@end-->
                    </div>
                </div>

            </div><!--titleAndUser out -->
        </div>

        <div class="underline"></div>
        <!--@if($module_info->info!= 'N')-->
		<div class="etc">
		 <div class="left">
		  <!--// 상단 다음글/이전글 출력 -->
          <!--@if($module_info->next_prev!= 'Y')--><!--@else-->
			<!--@foreach($document_list as $no => $document)-->
			<!--@if($document_srl == $document->get('document_srl'))-->
			<!--@if($document_list[$no+ 1])-->
			   <span class="next"><a href="{getUrl('','document_srl',$document_list[$no+1]->get('document_srl'))}">{$lang->cmd_next}</a></span>
			<!--@endif-->
			<!--@if($document_list[$no- 1])-->
			   <span class="prev"><a href="{getUrl('','document_srl',$document_list[$no-1]->get('document_srl'))}">{$lang->cmd_prev}</a></span>
			<!--@endif-->
			<!--@if(true) break;--><!--@endif-->
			<!--@endif-->
			<!--@endforeach-->
		  <!--@end-->
		 </div>
		 <div class="right">
		  <!--@if($module_info->default_style != 'blog')-->
		    <span class="cmd_list"><a href="{getUrl('document_srl','')}" >{$lang->cmd_list}</a></span>
		  <!--@end-->
		  <!--@if($oDocument->isEditable())-->
			<span class="modify"><a href="{getUrl('act','dispBoardWrite','document_srl',$oDocument->document_srl,'comment_srl','')}" >{$lang->cmd_modify}</a></span>
			<span class="delete"><a href="{getUrl('act','dispBoardDelete','document_srl',$oDocument->document_srl,'comment_srl','')}">{$lang->cmd_delete}</a></span> 
		  <!--@end-->
		  <!--@if($grant->write_document)-->
		    <span class="write"><a href="{getUrl('act','dispBoardWrite','document_srl','')}" >{$lang->cmd_write}</a></span>
		  <!--@end-->
         </div>
        </div>
        <div class="clear"></div>
		<!--@end-->

        <!--@if($oDocument->isExtraVarsExists() && (!$oDocument->isSecret() || $oDocument->isGranted()) )-->
        <table cellspacing="0" summary="" class="extraVarsList">
        <col width="150" />
        <col />
		<!--// 스튜디오/북마크일때 프리뷰&라벨 확장변수 히든 & 지정 확장변수 히든-->
		<!--@foreach($oDocument->getExtraVars() as $key => $val)-->
         <!--@if($val->value && (($module_info->default_style!='studio' && $module_info->default_style!='bookmark' && $mid !==$module_info->extra_mid) || ($val->name!="preview" && $val->name!="label" && $val->name!=$module_info->extra_name1 && $val->name!=$module_info->extra_name2 || $grant->manager)))-->
          <tr>
            <th>{$val->name}</th>
            <td>{$val->getValueHTML()}</td>
          </tr>
          <!--@else-->
          <!--@end-->
        <!--@end-->
        </table>
        <!--@end-->

		<!--@if($module_info->document_top_text)-->
			<div class="documentText">{$module_info->document_top_text}</div>
			<div class="clear"></div>
		<!--@end-->

        <div class="readBody">

                <!--@if($oDocument->isSecret() && !$oDocument->isGranted())-->
                    <div class="secretContent">
                        <form action="./" method="get" onsubmit="return procFilter(this, input_password)">
                        <input type="hidden" name="mid" value="{$mid}" />
                        <input type="hidden" name="page" value="{$page}" />
                        <input type="hidden" name="document_srl" value="{$oDocument->document_srl}" />

                            <div class="title">{$lang->msg_is_secret}</div>
                            <div class="content"><input type="password" name="password" id="cpw" class="inputTypeText" /><span class="button {$btn_class}"><input type="submit" value="{$lang->cmd_input}" accesskey="s" /></span></div>

                        </form>
                    </div>
                <!--@else-->
                    
					<!--// 이미지 자동 본문삽입 -->
					<!--@if($module_info->auto_img_insert='N')-->
                    {$oDocument->getContent()}
					<!--@else-->
                      {@ $uploaded_list = $oDocument->getUploadedFiles() }
                    <!--@foreach($uploaded_list as $key => $file)-->
                    {@$file_explode=explode(".",strtoupper($file->source_filename))}
                    <!--@if($file_explode[1]=="GIF" || $file_explode[1]=="JPG" || $file_explode[1]=="PNG" || $file_explode[1]=="BMP")-->
                    {@$picture.="<p align=center><img src='".$file->uploaded_filename."'  style=''  editor_component='image_link' /><br /><br /></p>"}
                    <!--@end-->
                    <!--@end--> 

                    <!--@if($picture)-->
                    {@ $cont=$oDocument->get('content')}
                    {@ $oDocument->add('content',$picture.$cont)}
                    <!--@end--> 

                    {$oDocument->getContent()}
                    <!--@end-->

                <!--@end-->

				<!--@if($module_info->document_bottom_text)-->
				<div class="documentText">{$module_info->document_bottom_text}</div>
				<div class="clear"></div>
				<!--@end-->

                <!-- 서명 / 프로필 이미지 출력 -->
                <!--@if($module_info->display_sign != 'N' && ($oDocument->getProfileImage() || $oDocument->getSignature()))-->
                    <div class="memberSignature">
                    <!--@if($oDocument->getProfileImage())-->
                        <div class="profile"><img src="{$oDocument->getProfileImage()}" alt="profile" /></div>
                    <!--@end-->
                    <!--@if($oDocument->getSignature())-->
                        <div class="signature">{$oDocument->getSignature()}</div>
                    <!--@end-->
                        <div class="clear"></div>
                    </div>
                <!--@end-->
            
        </div>

        {@ $tag_list = $oDocument->get('tag_list') }
        <!--@if(count($tag_list))-->
        <div class="tag">
            <ul>
                <!--@for($i=0;$i<count($tag_list);$i++)-->
                    {@ $tag = $tag_list[$i]; }
                    <li><a href="{getUrl('search_target','tag','search_keyword',$tag,'document_srl','')}" rel="tag">{htmlspecialchars($tag)}</a><!--@if($i<count($tag_list)-1)-->,&nbsp;<!--@end--></li>
                <!--@end-->
            </ul>
        </div>
        <!--@end-->

        <!--@if($oDocument->hasUploadedFiles())-->
        <div class="attachedFile">
            <!--// 이미지파일 출력옵션 -->
			{@ $uploaded_list = $oDocument->getUploadedFiles() }
            <ul>
			<!--@ foreach($uploaded_list as $key => $file)-->
		       <!--@if($module_info->display_file_view!='N')-->
                  <li><a href="{getUrl('')}{$file->download_url}">{$file->source_filename} ({FileHandler::filesize($file->file_size)})({number_format($file->download_count)})</a></li>
               <!--@else-->
				 <!--@ if($file->direct_download != 'Y')-->
				  <li><a href="{getUrl('')}{$file->download_url}">{$file->source_filename} ({FileHandler::filesize($file->file_size)})({number_format($file->download_count)})</a></li>  
				 <!--@ end-->  
               <!--@ end-->
			<!--@ end-->
            </ul>
        </div>
		<!--@end-->
    </div>        

    <!-- 목록, 수정/삭제 버튼 -->
    <div class="contentButton">
	<div class="contentButton1">
	  <!--// 하단 다음글/이전글 출력 -->
	  <!--@if($module_info->next_prev!= 'Y')--><!--@else-->
		<!--@foreach($document_list as $no => $document)-->
        <!--@if($document_srl == $document->get('document_srl'))-->
        <ul style="margin-bottom:5px;"><!--@if($document_list[$no+ 1])-->
           <a href="{getUrl('','document_srl',$document_list[$no+1]->get('document_srl'))}" class="button {$btn_class}"><span>다음글 : {$document_list[$no+ 1]->getTitle($module_info->next_prev_cut_size)}</span></a>
	    <!--@endif-->
	    </ul>
	    <ul><!--@if($document_list[$no- 1])-->
           <a href="{getUrl('','document_srl',$document_list[$no- 1]->get('document_srl'))}" class="button {$btn_class}"><span>이전글 : {$document_list[$no- 1]->getTitle($module_info->next_prev_cut_size)}</span></a>
	    <!--@endif-->
		</ul>
        <!--@if(true) break;--><!--@endif-->
        <!--@endif-->
        <!--@endforeach-->
	  <!--@end-->
	</div>

    <div class="contentButton2">
        <!--@if($module_info->default_style != 'blog')-->
        <a href="{getUrl('document_srl','')}" class="button {$btn_class}"><span>{$lang->cmd_list}</span></a>
        <!--@end-->
        <!--@if($oDocument->isEditable())-->
        <a href="{getUrl('act','dispBoardWrite','document_srl',$oDocument->document_srl,'comment_srl','')}" class="button {$btn_class}"><span>{$lang->cmd_modify}</span></a>
        <a href="{getUrl('act','dispBoardDelete','document_srl',$oDocument->document_srl,'comment_srl','')}" class="button {$btn_class}"><span>{$lang->cmd_delete}</span></a>
        <!--@end-->
    </div>
    </div>
</div>

	<!-- 엮인글 -->
	<!--@if($oDocument->allowTrackback())-->
		<!--#include("./trackback.html")-->
	<!--@end-->

	<!--// 댓글/창 펼쳐 보일지 지정 -->
		<!--@if($module_info->display_comment_box == 'N')-->
		{@ $__display_comment  = 'active'}
		<!--@else-->
		<!--@end-->
	<!--// 댓글 -->
	<!--@if($grant->write_comment && $oDocument->allowComment()) -->
		<div class="replyCount">
		  <div class="replyCountL">
			<a href="#" onclick="jQuery('#commentLayout').toggleClass('active'); return false;" class="button {$btn_class}">
				<span>{$lang->comment} [{$oDocument->getCommentcount()}]</span>
			</a>
		  </div>
		  <div class="replyCountR">
		  <a href="#" onclick="jQuery('#commentLayout').toggleClass('active'); return false;" class="button {$btn_class}"><span>{$lang->comment1}</span></a>
		  </div>
		</div>
	<!--@end-->
	<a name="comment"></a>
	<div id="commentLayout" class="commentToggleLayout {$__display_comment}">
		<!--#include("./comment.html")-->
		<!-- 댓글 입력 폼 -->
		<!--@if($grant->write_comment && $oDocument->isEnableComment() )-->
			<form action="./" method="post" onsubmit="return procFilter(this, insert_comment)" class="boardEditor" >
			<input type="hidden" name="mid" value="{$mid}" />
			<input type="hidden" name="document_srl" value="{$oDocument->document_srl}" />
			<input type="hidden" name="comment_srl" value="" />
			<input type="hidden" name="content" value="" />
				<div class="boardWrite commentEditor">
					<div class="userNameAndPw">
						<!--@if(!$is_logged)-->
						<label for="userName">{$lang->writer}</label>
						<input type="text" name="nick_name" value="" class="userName inputTypeText" id="userName"/>

						<label for="userPw">{$lang->password}</label>
						<input type="password" name="password" value="" id="userPw" class="userPw inputTypeText" />

						<label for="emailAddress">{$lang->email_address}</label>
						<input type="text" name="email_address" value="" id="emailAddress" class="emailAddress inputTypeText"/>

						<label for="homePage">{$lang->homepage}</label>
						<input type="text" name="homepage" value="" id="homePage" class="homePage inputTypeText"/>
						<!--@else-->
					    <input type="checkbox" name="notify_message" value="Y" checked="checked" id="notify_message" class="inputCheck" />
					    <label for="notify_message">{$lang->notify}</label>
						<!--@end-->
						<!--// 자동으로 비밀글 체크 -->
						<!--@if($module_info->secret=="Y")-->
						<input type="checkbox" name="is_secret" value="Y" id="is_secret" />
						<label for="is_secret">{$lang->secret}</label>
						<!--@end-->
					</div>

					<div class="editor">{$oDocument->getCommentEditor()}</div>
				</div>

				<div class="boardNavigation">
				     <!--// 추천/비추천 버턴 함께 출력 -->
					 <!--@if($module_info->display_commentvote=="Y")-->
					 <span class="button {$btn_class}" style="margin:0 5px;"><input onclick="doCallModuleAction('document','procDocumentVoteUp',{$oDocument->document_srl});" type="submit" value="추천+댓글" accesskey="s" /></span>
					 <span class="button {$btn_class}" style="margin:0 5px;"><input onclick="doCallModuleAction('document','procDocumentVoteDown',{$oDocument->document_srl});" type="submit" value="비추천+댓글" accesskey="s" /></span>
					 <!--@end-->
					 <span class="button red strong" style="margin:0 10px;"><input type="submit" value="{$lang->cmd_comment_registration}" accesskey="s" /></span>
				</div>

			</form>
		<!--@end-->
		</div>