<form action="./" method="get" class="boardListForm">
    <fieldset>
        <legend>List of Articles</legend>
		
		<table cellspacing="0" border="1" summary="List of Articles" class="boardList">
			<!--@if(($module_info->display_header!="N") || ($module_info->display_subheader!="N" && $search_keyword!="N" && $use_sub=="Y"))-->
			<thead>
				<tr>
					<!--// 목록 설정으로 table theader 생성 -->
					<!--@foreach($list_config as $key => $val)-->
						<!--// 기본 컨텐츠일 경우 -->
						<!--@if($val->idx == -1)-->
	
						<!--// 컨텐츠 종류에 따라서 출력 -->
						<!--@if($val->type == 'no')-->
							<th scope="col">{$lang->no}</th>
						<!--@elseif($val->type == 'title')-->
							<th scope="col" class="title">
								<!--@if($module_info->use_category == "Y" && ($module_info->category_style == "list_select" || $module_info->category_style == "wide_and_select" ))-->
								<span class="jumpTo">
									<select name="category" id="board_category">
										<option value="">{$lang->category}</option>
										<!--@foreach($category_list as $val)-->
										<option value="{$val->category_srl}" <!--@if($category==$val->category_srl)-->selected="selected"<!--@end-->>{str_repeat("&nbsp;&nbsp;",$val->depth)} {$val->title} <!--@if($val->document_count)-->({$val->document_count})<!--@end--></option>
										<!--@end-->
									</select>
									<button type="button" name="go_button" id="go_button" onclick="doChangeCategory(); return false;" class="button">Go</button>
								</span>
								<!--@end-->
								<a href="{getUrl('sort_index','title','sortkey','','order_type',$order_type)}">{$lang->title}<!--@if($sort_index=='title')--><img src="./img/common/{$order_icon}" alt="sort" width="5" height="3" class="sort" /></a><!--@end-->
							</th>
						<!--@elseif($val->type == 'regdate')-->
							<th scope="col"><a href="{getUrl('sort_index','regdate','sortkey','','order_type',$order_type)}">{$lang->date}<!--@if($sort_index=='regdate')--><img src="./img/common/{$order_icon}" alt="sort" width="5" height="3" class="sort" /><!--@end--></a></th>
						<!--@elseif($val->type == 'last_update')-->
							<th scope="col"><a href="{getUrl('sort_index','last_update','sortkey','','order_type',$order_type)}">{$lang->last_update}<!--@if($sort_index=='last_update')--><img src="./img/common/{$order_icon}" alt="sort" width="5" height="3" class="sort" /><!--@end--></a></th>
						<!--@elseif($val->type == 'nick_name')-->
							<th scope="col"><a href="{getUrl('sort_index','nick_name','sortkey','','order_type',$order_type)}">{$lang->writer}<!--@if($sort_index=='nick_name')--><img src="./img/common/{$order_icon}" alt="sort" width="5" height="3" class="sort" /><!--@end--></a></th>
						<!--@elseif($val->type == 'user_id')-->
							<th scope="col"><a href="{getUrl('sort_index','user_id','sortkey','','order_type',$order_type)}">{$lang->user_id}<!--@if($sort_index=='user_id')--><img src="./img/common/{$order_icon}" alt="sort" width="5" height="3" class="sort" /><!--@end--></a></th>
						<!--@elseif($val->type == 'user_name')-->
							<th scope="col"><a href="{getUrl('sort_index','user_name','sortkey','','order_type',$order_type)}">{$lang->user_name}<!--@if($sort_index=='user_name')--><img src="./img/common/{$order_icon}" alt="sort" width="5" height="3" class="sort" /><!--@end--></th>
						<!--@elseif($val->type == 'readed_count')-->
							<th scope="col"><a href="{getUrl('sort_index','readed_count','sortkey','','order_type',$order_type)}">{$lang->readed_count}<!--@if($sort_index=='readed_count')--><img src="./img/common/{$order_icon}" alt="sort" width="5" height="3" class="sort" /><!--@end--></a></th>
						<!--@elseif($val->type == 'voted_count')-->
							<th scope="col"><a href="{getUrl('sort_index','voted_count','sortkey','','order_type',$order_type)}">{$lang->voted_count}<!--@if($sort_index=='voted_count')--><img src="./img/common/{$order_icon}" alt="sort" width="5" height="3" class="sort" /><!--@end--></a></th>
                        <!--@elseif($val->type == 'last_post')-->
                            <th scope="col"><a href="{getUrl('sort_index','last_update','sortkey','','order_type',$order_type)}">{$lang->last_post}<!--@if($sort_index=='last_update')--><img src="./img/common/{$order_icon}" alt="sort" width="5" height="3" class="sort" /><!--@end--></a></th>
						<!--@end-->
						<!--// 사용자 선언 확장변수일 경우 -->
						<!--@elseif( $module_info->grant_extra=="Y" && (((substr_count($val->eid,'_grantAA') || substr_count($val->eid,'_grantMA') || substr_count($val->eid,'_grantGA')) && !$grant->manager) || ((substr_count($val->eid,'_grantAM') || substr_count($val->eid,'_grantMM') || substr_count($val->eid,'_grantGM')) && !$logged_info)) )-->
						<!--@else-->
							<th scope="col"><a href="{getUrl('sort_index','','sortkey',$val->eid,'order_type',$order_type)}">{$val->name}</a></th>
						<!--@end-->
					<!--@end-->
					<!--@if($grant->manager)--><th scope="col"><input type="checkbox" onclick="XE.checkboxToggleAll({ doClick:true }); return false;" title="Check All" /></th><!--@end-->
				</tr>
			</thead>
			<!--@end-->
			<tbody>
	
				<!--@if(!$document_list && !$notice_list)-->
				<tr>
					<td colspan="<!--@if($grant->manager)-->{count($list_config)+1}<!--@else-->{count($list_config)}<!--@end-->" style="text-align:center; padding:15px 0px 15px 0px; border-bottom:none;">
						{$lang->no_documents}
					</td>
				</tr>
				<!--@else-->
			
				<!--@foreach($notice_list as $no => $document)-->
				<!--@if(  !($document->isSecret() && ($module_info->secret_list=="hide_all" || (($module_info->secret_list=="hide") && ($document->getUserID()!=$logged_info->user_id)) )) || $grant->manager )-->
				{@$member_grant=$document->getExtraEidValue('member_grantAA')}
				{@$group_grant=$document->getExtraEidValue('group_grantAA')}
				<!--@if( ((!$member_grant || ($member_grant &&  substr_count(",".$member_grant.",", ",".$logged_info->user_id.","))) && (!$group_grant || ($group_grant &&  substr_count(",".$group_grant.",", ",".$logged_info->group.",")))) || $grant->manager=="Y" || $grant->document_grant=="N")-->
				<tr class="notice">
					<!--// 목록 설정으로 table theader 생성 -->
					<!--@foreach($list_config as $key => $val)-->
	
						<!--// 기본 컨텐츠일 경우 -->
						<!--@if($val->idx == -1)-->
	
							<!--// 컨텐츠 종류에 따라서 출력 -->
							<!--@if($val->type == 'no')-->
								<td class="notice"><!--@if($document_srl == $document->document_srl)-->&raquo;<!--@else-->{$lang->notice}<!--@end--></td>
							<!--@elseif($val->type == 'title')-->
								<td class="title">
									{@$subject_cut_size=$module_info->subject_cut_size}
									<!--@if($module_info->icon_hot && $module_info->icon_hot<=$document->get('readed_count'))--><img src="./img/icons/hot.gif" class="iePngFix" />{@$subject_cut_size-=10}<!--@end-->

									<!--@if($module_info->display_category!="N" && $module_info->use_category == "Y" && $document->get('category_srl'))-->
									<strong class="category">{$category_list[$document->get('category_srl')]->title}</strong>
									<!--@end-->

									{@$link_url = $document->getExtraEidValue('link_url');}
									<!--@if ($grant->manager!="Y" && $logged_info->user_id!=$document->get('user_id') && $module_info->use_link == "Y" && $link_url)-->
										<!--@if (!strstr($link_url,'http://'))-->
											{@$link_url = 'http://'.$link_url;}
										<!--@end-->

										<!--@if($module_info->link_hit!="N" && $read_count == $document->document_srl && $read_counted[$document->document_srl]!="Y")-->
											{@	
												$oDocumentController = &getController('document');
												$oDocumentController->updateReadedCount($document);	
												$read_counted[$document->document_srl]="Y";
											}
											<script>location.href="{getUrl('','mid',$mid,'page',$page,'document_srl','','listStyle',$listStyle)}"</script>
										<!--@end-->
										<a href="{getUrl('','read_count',$document->document_srl,'mid',$mid,'page',$page,'document_srl','','listStyle',$listStyle,'layout_srl',$layout_srl)}"  onclick="window.open('{$link_url}');" style="cursor:pointer">
									<!--@elseif($module_info->default_style=="slide" || ($module_info->list_link=="noview" && $grant->manager!="Y" ))-->
									<!--@else-->
										<a <!--@if((!$document->isSecret() || $grant->manager=="Y") && $module_info->subject_mouseover=="subject" && ($subject_cut_size< strlen(strip_tags($document->getTitle())))  )-->title="{strip_tags($document->getTitle())}" <!--@elseif((!$document->isSecret() || $grant->manager=="Y") && $module_info->subject_mouseover=="content")-->title="{strip_tags($document->getContentText($module_info->content_cut_size))}"<!--@end--> href="{getUrl('document_srl',$document->document_srl, 'listStyle', $listStyle, 'cpage','')}" <!--@if($module_info->list_link=="popup")-->onclick="window.open(this.href+'&layout_srl={$popup_layout}','','menubar=no,toolbar=no,location=no,resizable=yes,status=no,scrollbars=yes,fullscreen=no,width={$module_info->popup_width}px,height={$module_info->popup_height}px,top=50px,left=50px');return false"<!--@end-->>
									<!--@end-->
									{$document->getTitle($subject_cut_size)}</a>

									<!--@if($module_info->display_new!="N")-->
										{$document->printExtraImages(60*60*$module_info->duration_new)}
									<!--@end-->
									
									<!--@if($document->getCommentCount())-->
										<!--@if($module_info->default_style=="slide" || ($module_info->list_link=="noview" && $grant->manager!="Y" ))-->
										<!--@else-->
										<a href="{getUrl('document_srl', $document->document_srl)}#comment" <!--@if($module_info->list_link=="popup")-->onclick="window.open(this.href+'&layout_srl={$popup_layout}','','menubar=no,toolbar=no,location=no,resizable=yes,status=no,scrollbars=yes,fullscreen=no,width={$module_info->popup_width}px,height={$module_info->popup_height}px,top=50px,left=50px');return false"<!--@end-->>
										<!--@end-->
										<span class="replyNum" title="Replies">[{$document->getCommentCount()}]</span></a>
									<!--@end-->
	
									<!--@if($document->getTrackbackCount())-->
										<!--@if($module_info->default_style=="slide" || ($module_info->list_link=="noview" && $grant->manager!="Y" ))-->
										<!--@else-->
										<a href="{getUrl('document_srl', $document->document_srl)}#trackback" <!--@if($module_info->list_link=="popup")-->onclick="window.open(this.href+'&layout_srl={$popup_layout}','','menubar=no,toolbar=no,location=no,resizable=yes,status=no,scrollbars=yes,fullscreen=no,width={$module_info->popup_width}px,height={$module_info->popup_height}px,top=50px,left=50px');return false"<!--@end-->>
										<!--@end-->
										<span class="trackbackNum" title="Trackbacks">[{$document->getTrackbackCount()}]</span></a>
									<!--@end-->
	
								</td>
							<!--@elseif($val->type == 'regdate')-->
								<td class="date">{$document->getRegdate('Y-m-d')}</td>
							<!--@elseif($val->type == 'last_update')-->
								<td class="date">{zdate($document->get('last_update'),'Y-m-d H:i')}</td>
							<!--@elseif($val->type == 'nick_name')-->
								<td class="author"><a href="#popup_menu_area" class="member_{$document->get('member_srl')}" onclick="return false">{$document->getNickName()}</a></td>
							<!--@elseif($val->type == 'user_id')-->
								<td class="author">{$document->getUserID()}</a></td>
							<!--@elseif($val->type == 'user_name')-->
								<td class="author"><a href="#popup_menu_area" class="member_{$document->get('member_srl')}" onclick="return false">{$document->getUserName()}</a></td>
							<!--@elseif($val->type == 'readed_count')-->
								<td class="reading">{$document->get('readed_count')>0?$document->get('readed_count'):'&nbsp;'}</td>
							<!--@elseif($val->type == 'voted_count')-->
								<td class="recommend">{$document->get('voted_count')!=0?$document->get('voted_count'):'&nbsp;'}</td>
							<!--@elseif($val->type == 'last_post')-->
                                <td class="lastReply">
                                <!--@if((int)($document->get('comment_count'))>0)-->
									<!--@if($module_info->default_style=="slide" || ($module_info->list_link=="noview" && $grant->manager!="Y" ))-->
									<!--@else-->
                                    <a href="{$document->getPermanentUrl()}#comment" class="replyAnchor" <!--@if($module_info->list_link=="popup")-->onclick="window.open(this.href+'&layout_srl={$popup_layout}','','menubar=no,toolbar=no,location=no,resizable=yes,status=no,scrollbars=yes,fullscreen=no,width={$module_info->popup_width}px,height={$module_info->popup_height}px,top=50px,left=50px');return false"<!--@end-->>
									<!--@end-->
									{zdate($document->get('last_update'),'Y-m-d')} {zdate($document->get('last_update'),'H:i')}</a>
                                    <!--@if($document->get('last_updater'))-->
                                        <sub class="by">by</sub>
                                        {htmlspecialchars($document->get('last_updater'))}
                                    <!--@end-->
                                <!--@else-->
                                    &nbsp;
                                <!--@end-->
                                </td>
							<!--@end-->
	
						<!--// 사용자 선언 확장변수일 경우 -->
						<!--@elseif( $module_info->grant_extra=="Y" && (((substr_count($val->eid,'_grantAA') || substr_count($val->eid,'_grantMA') || substr_count($val->eid,'_grantGA')) && !$grant->manager) || ((substr_count($val->eid,'_grantAM') || substr_count($val->eid,'_grantMM') || substr_count($val->eid,'_grantGM')) && !$logged_info)) )-->
						<!--@else-->
							<!--@if(!(!$grant->manager && strstr(strtolower($val->eid),"ordering") ))-->
								<td <!--@if($val->eid=='regdate' && $sortkey=='regdate' )-->class="date"<!--@end-->>{$document->getExtraValueHTML($val->idx)}&nbsp;</td>
							<!--@end-->
						<!--@end-->
					<!--@end-->
					<!--@if($grant->manager)-->
						<td class="check"><input type="checkbox" name="cart" value="{$document->document_srl}" title="Check this" onclick="doAddDocumentCart(this)" <!--@if($document->isCarted())-->checked="checked"<!--@end--> /></td>
					<!--@end-->
				</tr>
				<!--@end-->
				<!--@end-->
				<!--@end-->	
			<!--@end-->
			</tbody>
        </table>
            


		{@$browser_type = getenv("HTTP_USER_AGENT")}
		<!--@if(preg_match("/compatible; MSIE 6.0/",$browser_type))-->
			{@$browser="IE6"}
		<!--@elseif (preg_match("/compatible; MSIE 7.0/",$browser_type))-->
			{@$browser="IE7"}
		<!--@elseif (preg_match("/compatible; MSIE 8.0/",$browser_type))-->
			{@$browser="IE8"}
		<!--@elseif (preg_match("/Firefox/",$browser_type))-->
			{@$browser="FF3"}
		<!--@end-->

		<!--// 갤러리 목록 출력 -->
		{@ $height = $module_info->thumbnail_height + 50; }
		<!--@if($module_info->use_category=='Y')-->{@ $height += 20 }<!--@end-->
		<!--@if($module_info->display_author!='N' || $module_info->display_regdate!='N')-->{@ $height += 25 }<!--@end-->
		<!--@if($module_info->display_readed_count !='N' || $module_info->display_voted_count!='N')-->{@ $height2 += 25 }<!--@end-->

		<div id="frame">
		<!--@foreach($document_list as $no => $document)-->
			{@$count_gallery++}
			<div id="gallery_{$document->document_srl}" style="display:<!--@if($count_gallery==1)-->inline<!--@else-->none<!--@end-->">

				<!--@if($module_info->frame_title=="top")-->
				<div class="title">
					{$document->getTitle($module_info->subject_cut_size)}
				</div>
				<!--@end-->


				<!-- sejin7940 - 썸네일 정보 추출 for FrameGallery (시작) -->
				{@$thumbnail=$thumbnail_temp=""}
				<!--@if($document->hasUploadedFiles())-->
					{@$uploaded_list = $document->getUploadedFiles() }
					<!--@foreach($uploaded_list as $key => $file)-->
						<!--@if(strstr(strtolower($file->uploaded_filename),"_thumb"))-->
							{@$thumbnail = $file->uploaded_filename}
						<!--@end-->
						<!--@if( !$thumbmail_temp && (substr_count(strtolower($file->source_filename),'.jpg') || substr_count(strtolower($file->source_filename),'.gif') || substr_count(strtolower($file->source_filename),'.bmp') || substr_count(strtolower($file->source_filename),'.png')))-->
							{@$thumbnail_temp = $file->uploaded_filename}
						<!--@end-->
					<!--@end-->
					<!--@if(!$thumbnail)-->{@$thumbnail = $thumbnail_temp}<!--@end-->
				<!--@end-->
				<!-- sejin7940 - 썸네일 정보 추출 for FrameGallery (끝) -->


				<!--@if($document->hasUploadedFiles() )-->
					<!--BeforeDocument({$document_srl},{$document->get('member_srl')})-->
					<div class="frameview" style="width:{$module_info->frame_width}px; ">
						<!--@if($browser=="IE6")-->  <!-- 확대하기 섬네일이 IE6에서 안 나오는 버그 수정위해 중복출력 (이유는 모름 ㅡㅡ;)  -->
							<div class="document_{$document_srl}_{$document->get('member_srl')} xe_content" style="border:0px solid red; display:none">
								<img editor_component='image_link' src="{$thumbnail}"  width="{$module_info->frame_width}px"  />
							</div>
						<!--@end-->
						<div class="document_{$document_srl}_{$document->get('member_srl')} xe_content" style="border:0px solid red">
							<img editor_component='image_link' src="{$thumbnail}"  width="{$module_info->frame_width}px" />
						</div>
					</div>
					<!--AfterDocument({$document_srl},{$document->get('member_srl')})-->
				<!--@end-->

				<!--@if($module_info->frame_title=="bottom")-->
				<div class="title">
					{$document->getTitle($module_info->subject_cut_size)}
				</div>
				<!--@end-->

			</div>
		<!--@if($count_gallery==1)--><input type="hidden" id="gallery_bk" value="{$document->document_srl}"><!--@end-->
		<!--@end-->
		</div>
		<div id="framebottom">&nbsp;</div>

		<div class="framethumbnailBox">
			<div style="float:left; border:0px solid red;"><!--@if ($page>1)--><a href="{getUrl('page',($page-1),'document_srl','','division',$division,'last_division',$last_division,'page_history',$page_history)}" class="prev"><img src="./img/common/gallery_arrow_left.gif" border="0" alt="" class="thumb" width="15" height="16" style="padding:25px 11px 0px 0px"/></a><!--@else--><img src="./img/common/t.gif" border="0" alt="" class="thumb" width="15" height="16" style="padding:25px 11px 0px 0px"/><!--@end--></div>
			
		   <!--@foreach($document_list as $no => $document)-->
			<!--@if(!$document->isNotice())-->

			<div class="cell" style="width:{$module_info->thumbnail_width+11}px; text-align:center">
			<!--@foreach($list_config as $key => $val)-->
				<!--@if($val->type == 'thumbnail')-->
					<!--@if($document->thumbnailExists($module_info->thumbnail_width, $module_info->thumbnail_height, $module_info->thumbnail_type))-->
						<a onclick="document.getElementById('gallery_'+document.getElementById('gallery_bk').value).style.display='none'; document.getElementById('gallery_{$document->document_srl}').style.display='inline'; document.getElementById('gallery_bk').value={$document->document_srl}" style="cursor:pointer"><img src="{$document->getThumbnail($module_info->thumbnail_width, $module_info->thumbnail_height, $module_info->thumbnail_type)}" border="0" alt="" class="thumb"/></a>
					<!--@else-->
						<img src="./images/common/blank.gif" border="0" alt="" class="thumb" width="{$module_info->thumbnail_width}" height="{$module_info->thumbnail_height}" />
					<!--@end-->
				<!--@elseif($val->type == 'title')-->
				<div class="title" >
					<!--@if($module_info->use_category == "Y" && $document->get('category_srl'))-->
					<strong class="category">{$category_list[$document->get('category_srl')]->title}</strong><br />
					<!--@end-->

					<!--@if($grant->manager)-->
						<input type="checkbox" name="cart" value="{$document->document_srl}" onclick="doAddDocumentCart(this)" <!--@if($document->isCarted())-->checked="checked"<!--@end--> /> 
					<!--@end-->

					<a href="{getUrl('document_srl',$document->document_srl, 'listStyle', $listStyle, 'cpage','')}">{$document->getTitle($module_info->subject_cut_size)}</a>

					<!--@if($document->getCommentCount())-->
						<span class="replyAndTrackback" title="Replies">(<strong>{$document->getCommentCount()}</strong>)</span>
					<!--@end-->

					<!--@if($document->getTrackbackCount())-->
						<span class="replyAndTrackback" title="Trackbacks">[<strong>{$document->getTrackbackCount()}</strong>]</span>
					<!--@end-->
				</div>
				<!--else-->
					<!--@if(!$_meta_display)--><ul class="meta">{@$_meta_display = true}<!--@end-->
					<!--@if($val->type == 'regdate')-->
						<li class="date">{$document->getRegdate('Y-m-d')}</li>
					<!--@elseif($val->type == 'last_update')-->
						<li class="date">{zdate($document->get('last_update'),'Y-m-d H:i')}</li>
					<!--@elseif($val->type == 'nick_name')-->
						<li class="author"><!--@if(!($sortkey=='regdate' && $grant->manager!="Y"))--><a href="#popup_menu_area" class="member_{$document->get('member_srl')}" onclick="return false"><!--@end-->{$document->getNickName()}</a></li>
					<!--@elseif($val->type == 'user_id')-->
						<li class="author">{$document->getUserID()}</a></li>
					<!--@elseif($val->type == 'user_name')-->
						<li class="author"><a href="#popup_menu_area" class="member_{$document->get('member_srl')}" onclick="return false">{$document->getUserName()}</a></li>
					<!--@elseif($val->type == 'readed_count')-->
						<li class="reading">{$lang->readed_count} : {$document->get('readed_count')>0?$document->get('readed_count'):'0'}</li>
					<!--@elseif($val->type == 'voted_count')-->
						<li class="recommend">{$lang->voted_count} : {$document->get('voted_count')!=0?$document->get('voted_count'):'0'}</li>
					<!--@end-->
				<!--@end-->
			<!--@end-->
			</div>
			<!--@end-->
			<!--@end-->
			<div style="float:right;border:0px solid red;"><!--@if ($page_navigation->last_page>1 && $page<$page_navigation->last_page)--><a href="{getUrl('page',($page+1),'document_srl','','division',$division,'last_division',$last_division,'page_history',$page_history)}" class="next"><img src="./img/common/gallery_arrow_right.gif" border="0" alt="" class="thumb" width="15" height="16" style="padding:25px 0px 0px 11px"/></a><!--@else--><img src="./img/common/t.gif" border="0" alt="" class="thumb" width="15" height="16" style="padding:25px 0px 0px 11px"/><!--@end--></div>
			<div class="clear"></div>
		</div>

	</fieldset>
</form>
