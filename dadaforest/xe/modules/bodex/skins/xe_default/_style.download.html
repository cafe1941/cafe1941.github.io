<!--// 목록 출력 -->

{@
    $download_file_point = abs($oBodex->getPointConfig('download_file'));
    $grant->manager ? $_col_count = 3 : $_col_count = 2;
    $arr_display_var  = $extra_key_list = $writer_rating_list = array();
    $writer_ccl_key = null;

    $is_display_image = (!$module_info->display_file_list || $module_info->display_file_list=='A'||$module_info->display_file_list=='I'||$module_info->display_file_list=='BI'||$module_info->display_file_list=='MI');
    $is_display_media = (!$module_info->display_file_list || $module_info->display_file_list=='A'||$module_info->display_file_list=='M'||$module_info->display_file_list=='BM'||$module_info->display_file_list=='MI');
    $is_display_binary = (!$module_info->display_file_list || $module_info->display_file_list=='A'||$module_info->display_file_list=='B'||$module_info->display_file_list=='BM'||$module_info->display_file_list=='BI');
}

<table border="1" cellspacing="0" class="bodexList">
    <!--@if($module_info->display_list_head == 'Y')-->
    <thead>
        <tr name="_col_sc_1">

            <!--// 관리자일 경우 게시글 선택 checkbox 표시 -->
            <!--@if($grant->manager)-->
                <th scope="col" class="checkbox"><input type="checkbox" onclick="XE.checkboxToggleAll({ doClick:true }); return false;" /></th>
            <!--@endif-->

            <th scope="col" colspan="2" class="title">
                <!--@if($module_info->use_category == "Y")-->
                    <!--// 카테고리 사용시 카테고리 선택 표시 -->
                    <div class="category">
                        <select name="category" id="board_category" onchange="doChangeCategory(); return false;" class="dStyle" style="width:{$module_info->category_width};">
                            <option value="">{$lang->category}</option>
                            <!--@foreach($category_list as $cat_val)-->
                                <option value="{$cat_val->category_srl}" {$category==$cat_val->category_srl?'selected="selected"':''}>{str_repeat("&nbsp;&nbsp;",$cat_val->depth)}&nbsp;{$cat_val->title.($cat_val->document_count?'&nbsp;('.$cat_val->document_count.')':'')}</option>
                            <!--@endforeach-->
                        </select>
                    </div>
                <!--@endif-->
                &nbsp;
            </th>

            <!--// 목록 설정으로 table theader 생성 -->
            <!--@foreach($list_config as $key => $val)-->
                <!--// 기본 컨텐츠일 경우 -->
                <!--@if($val->idx == -1)-->
                    <!--// 컨텐츠 종류에 따라서 출력 -->
                    <!--@if(in_array($val->type,array('thumbnail','summary','category','nick_name','regdate','last_update','last_updater','readed_count','voted_count','blamed_count')))-->
                        {@$arr_display_var[$val->type] = 'Y'}
                        <!--@if($val->sort=='Y')-->
                            <!--@
                                if(in_array($val->type,array('thumbnail','summary','category'))) continue;
                                elseif($val->type=='voted_count') $__lang = ($module_info->use_vote == 'S' || $module_info->use_vote == 'Z')?$lang->col_star:$lang->voted_count;
                                elseif($val->type=='blamed_count' && ($module_info->use_vote == 'S' || $module_info->use_vote == 'Z')) continue;
                                else $__lang = Context::getLang($val->type);
                            -->
                                {@ $_col_count++}
                                <th scope="col" class="{$val->type} {$val->sort=='Y'?'sort':''}">
                                    <!--@if($val->sort=='Y')-->
                                        <a class="{($sort_index==$val->type)?$order_type:''}" href="{getUrl('sort_index',$val->type,'order_type',$order_type)}">{$__lang}</a>
                                    <!--@else-->
                                        {$__lang}
                                    <!--@endif-->
                                </th>
                            <!--@endif-->
                        <!--@endif-->
                    <!--@endif-->
                <!--@else-->
                    <!--// 일반 문서 출력때 루프를 줄이기위해 미리 키값 저장 -->
                    <!--@if(substr($val->eid,0,13) == 'writer_rating')-->
                        {@ $writer_rating_list[] = $key}
                    <!--@elseif($val->eid=='writer_display_ccl')-->
                        {@ $writer_ccl_key = $key}
                    <!--@else-->
                        {@ $extra_key_list[] = $key}
                    <!--@endif-->
                    <!--@if($val->sort=='Y')-->
                        {@$_col_count++}
                        <th scope="col" class="extravalue {$val->sort=='Y'?'sort':''}">
                            <a class="{($sort_index==$val->type)?$order_type:''}" href="{getUrl('sort_index','extra_vars'.$val->idx,'order_type',$order_type)}">{$val->name}</a>
                        </th>
                    <!--@endif-->
                <!--@endif-->
            <!--@endforeach-->
        </tr>
    </thead>
    <!--@else-->
        <!--@foreach($list_config as $key => $val)-->
            <!--@if($val->idx == -1)-->
                {@$arr_display_var[$val->type] = 'Y'}
            <!--@else-->
                <!--@if(substr($val->eid,0,13) == 'writer_rating')-->
                    {@ $writer_rating_list[] = $key}
                <!--@elseif($val->eid=='writer_display_ccl')-->
                    {@ $writer_ccl_key = $key}
                <!--@else-->
                    {@ $extra_key_list[] = $key}
                <!--@endif-->
            <!--@endif-->
        <!--@endforeach-->
    <!--@endif-->
    <tbody>

    <!--// 게시물이 없으면 등록된 글이 없음을 표시 -->
    <!--@if(!$document_list && !$notice_list)-->
        <tr class="bodexBg1 tCenter">
            <td class="title" colspan="{$_col_count}">
                {$lang->no_documents}
            </td>
        </tr>
    <!--@else-->

        <!--// 공지사항 출력 -->
        <!--@if(!$is_view_document || ($is_view_document && $module_info->display_foot_list_ex == 'Y'))-->
            <!--@foreach($notice_list as $no => $document)-->
                {@
                    $document = $oBodex->getWith($document, array('category_srl','last_update','readed_count','voted_count','blamed_count','member_srl','reward_point','reward_srl','is_notice'));
                    $document->reward_point=round($document->reward_point / 2);
                    $is_grant = $grant->view && (!$document->isSecret() || $document->isGranted());
                }
                <tr class="notice bodexBg0">
                <!--// 관리자일 경우 게시글 선택 checkbox 표시 -->
                <!--@if($grant->manager)-->
                    <td class="checkbox"><input type="checkbox" name="cart" value="{$document->document_srl}" onclick="doAddDocumentCart(this)" {$document->isCarted()?'checked="checked"':''} /></td>
                <!--@endif-->

                    <!--// 컨텐츠 종류에 따라서 출력 -->
                    <td class="notice"><img src="./images/common/{($document_srl == $document->document_srl)?'arrowNextB2.gif" alt="Selected"':($document->is_notice == 'Y'?'notice.gif" title="Notice" alt="Notice"':'iconBest.gif" title="Best" alt="Best"')} border="0" /></td>

                        <td class="title">
                        <!--@if($arr_display_var['category']=='Y' && $module_info->use_category != "N" && $document->category_srl)-->
                            <!--@if($module_info->display_notice_category == 'Y')-->
                                <strong class="category" <!--@if($category_list[$document->category_srl]->color != 'transparent')-->style="color:{$category_list[$document->category_srl]->color};"<!--@endif-->>{$category_list[$document->category_srl]->title}</strong>
                            <!--@else-->
                                <strong class="category">{$document->is_notice == 'Y'?$lang->notice:'Best'}</strong>
                            <!--@endif-->
                        <!--@endif-->

                        <!--@if($module_info->use_reward && $module_info->use_reward != 'N' && $document->reward_point > 0)-->
                            <span class="rewardPoint {($document->reward_srl > 0 || $document->reward_point == 0)?'rewardAdopt':''}" title="{($document->reward_srl > 0 || $document->reward_point == 0)?$lang->adopted:$lang->not_adopted}">{$document->reward_point}</span>
                        <!--@endif-->

                        <a href="{getUrl('document_srl',$document->document_srl, 'listStyle', $listStyle, 'cpage','')}">{$document->getTitle($module_info->subject_cut_size)}</a>
                        {$oBodex->printExtraImages($document->getExtraImages(60*60*$module_info->duration_new))}
                        {@
                            $__r_count=$document->getCommentCount();
                            $__t_count=$document->getTrackbackCount();
                        }
                        <!--@if( $__r_count || $__t_count )-->
                            <span class="replyAndTrackback">
                                <!--@if($is_grant)-->
                                    <!--@if($__r_count)--><a href="{getUrl('document_srl', $document->document_srl)}#comment"><span class="replies" title="Replies">[{$__r_count}]</span></a><!--@endif-->
                                    <!--@if($__t_count)--><a href="{getUrl('document_srl', $document->document_srl)}#trackback"><span class="trackbacks" title="Trackbacks">({$__t_count})</span></a><!--@endif-->
                                <!--@else-->
                                    <!--@if($__r_count)--><span class="replies" title="Replies">[{$__r_count}]</span><!--@endif-->
                                    <!--@if($__t_count)--><span class="trackbacks" title="Trackbacks">({$__t_count})</span><!--@endif-->
                                <!--@endif-->
                            </span>
                        <!--@endif-->
                    </td>

                    <!--// 목록 설정으로 table theader 생성 -->
                    <!--@foreach($list_config as $key => $val)-->
                        <!--@if($val->sort=='Y')-->
                            <!--@if($val->idx == -1)-->
                                <!--@if(in_array($val->type,array('nick_name','regdate','last_update','last_updater','readed_count','voted_count','blamed_count')))-->
                                    <!--@
                                        if($val->type == 'nick_name'){
                                            $__value=$document->getNickName();
                                            $__value=($__value=='anonymous'?$lang->anonymous:$__value);
                                            $document->member_srl = (!$grant->manager && $document->member_srl && $document->get('user_id')=='anonymous')?0:$document->member_srl;
                                            $__value='<div class="'.($document->member_srl?'member_'.$document->member_srl:'bodex_0'.$document->document_srl).'">'.$__value.'</div>';
                                        }elseif($val->type == 'regdate')
                                            $__value=$document->getRegdate('Y-m-d');
                                        elseif($val->type == 'last_update')
                                            $__value=zdate($document->last_update,'Y-m-d H:i');
                                        elseif($val->type == 'readed_count')
                                            $__value=$document->readed_count>0?$document->readed_count:'&nbsp;';
                                        elseif($val->type == 'voted_count'){
                                            if($module_info->use_vote == 'S' || $module_info->use_vote == 'Z')
                                                $__value=(abs($document->blamed_count)>0?number_format($document->voted_count / abs($document->blamed_count),1):'0').'/'.abs($document->blamed_count);
                                            else $__value=$document->voted_count>0?$document->voted_count:'&nbsp;';
                                        }elseif($val->type == 'blamed_count'){
                                            if($module_info->use_vote == 'S' || $module_info->use_vote == 'Z') continue;
                                            $__value=$document->blamed_count<0?$document->blamed_count:'&nbsp;';
                                        }else $__value= $document->get($val->type);
                                    -->
                                        <td class="{$val->type}">{$__value}</td>
                                    <!--@endif-->
                                <!--@endif-->
                            <!--// 사용자 선언 확장변수일 경우 -->
                            <!--@else-->
                                <td class="extravalue"><!--@if($is_grant || $module_info->display_secret_extravalue=='Y')-->{$oBodex->cutStrEx($document->getExtraValueHTML($val->idx), $module_info->content_extravalue_size)}<!--@else-->{$lang->secret}<!--@endif--></td>
                            <!--@endif-->
                        <!--@endif-->
                    <!--@endforeach-->
                </tr>
            <!--@endforeach-->
        <!--@endif-->

        <tr class="itembox bodexBg1">
            <td colspan="{$_col_count}">
                <!--// 목록 출력 -->
                <!--@foreach($document_list as $no => $document)-->
                        {@
                            $document = $oBodex->getWith($document, array('category_srl','last_update','last_updater','readed_count','voted_count','blamed_count','member_srl','reward_point','reward_srl'));
                            $document->reward_point=round($document->reward_point/2);

                            $is_grant = $grant->view && (!$document->isSecret() || $document->isGranted());
                            $file_list = array();
                            $is_button = false;
                            $total_down = 0;
                        }
                        <!--@if(in_array($module_info->display_download_button, array('Y','L')) && $document->hasUploadedFiles() && $is_grant)-->
                            {@
                                $file_list = $oBodex->getSplitFileList($document->getUploadedFiles());
                                $downloaded_list = ($module_info->use_down_point_always=='Y') ? array():$oBodex->getDownloadedLogInfo($document->document_srl);
                            }
                        <!--@endif-->
                        <!--@if($logged_info && $logged_info->member_srl == $document->member_srl && $module_info->login_nickname_color)-->{@ $_tmp_nick_color = ' style="color:'.$module_info->login_nickname_color.'"'}<!--@else-->{@ $_tmp_nick_color = ''}<!--@endif-->

                        <div class="downloadBox">
                            <!--@if($arr_display_var['thumbnail']=='Y')-->
                            <div class="thumb <!--@if($module_info->thumbnail_position=='R')-->thumbfr<!--@endif-->" style="width:{$module_info->thumbnail_width+4}px;">
                                <a href="{getUrl('document_srl',$document->document_srl,'listStyle',$listStyle, 'cpage','')}">
                                <!--@if($document->thumbnailExists($module_info->thumbnail_width, $module_info->thumbnail_height, $module_info->thumbnail_type))-->
                                    <img src="{$document->getThumbnail($module_info->thumbnail_width, $module_info->thumbnail_height, $module_info->thumbnail_type)}" border="0" alt="" class="thumb"/>
                                <!--@else-->
                                    <img src="./images/common/noimg.png" border="0" alt="" class="thumb" width="{$module_info->thumbnail_width}" height="{$module_info->thumbnail_height}" />
                                <!--@endif-->
                                </a>
                            </div>
                            <!--@endif-->
                            <div class="info">
                                <ul>
                                    <li class="title">
                                        <!--// 관리자일 경우 게시글 선택 checkbox 표시 -->
                                        <!--@if($grant->manager)-->
                                            <input class="checkbox" type="checkbox" name="cart" value="{$document->document_srl}" onclick="doAddDocumentCart(this)" {$document->isCarted()?'checked="checked"':''} />
                                        <!--@endif-->

                                        <!--@if($document_srl == $document->document_srl)--><img src="./images/common/arrowNextB2.gif" border="0" alt="Selected" /><!--@end-->

                                        <!--@if($module_info->use_reward && $module_info->use_reward != 'N' && $document->reward_point > 0)-->
                                            <span class="rewardPoint {($document->reward_srl > 0 || $document->reward_point == 0)?'rewardAdopt':''}" title="{($document->reward_srl > 0 || $document->reward_point == 0)?$lang->adopted:$lang->not_adopted}">{$document->reward_point}</span>
                                        <!--@endif-->

                                        <a href="{getUrl('document_srl',$document->document_srl, 'listStyle', $listStyle, 'cpage','')}">{$document->getTitle($module_info->subject_cut_size)}</a>
                                        <!--@if($module_info->display_pang_point == 'Y')-->
                                            {@ $pangpang_point=unserialize($document->get('extra_vars'))}
                                            <!--@if($pangpang_point && $pangpang_point->point_pang_pang->document->point > 0)-->
                                            {@$pangpang_point = sprintf($lang->pang_pang, $pangpang_point->point_pang_pang->document->point)}
                                            <img src="./images/{$module_info->colorset}/coin.gif" title="{$pangpang_point}" alt="{$pangpang_point}">
                                            <!--@endif-->
                                        <!--@endif-->
                                        {$oBodex->printExtraImages($document->getExtraImages(60*60*$module_info->duration_new))}
                                        {@
                                            $__r_count=$document->getCommentCount();
                                            $__t_count=$document->getTrackbackCount();
                                        }
                                        <!--@if( $__r_count || $__t_count )-->
                                            <span class="replyAndTrackback">
                                                <!--@if($is_grant)-->
                                                    <!--@if($__r_count)--><a href="{getUrl('document_srl', $document->document_srl)}#comment"><span class="replies" title="Replies">[{$__r_count}]</span></a><!--@endif-->
                                                    <!--@if($__t_count)--><a href="{getUrl('document_srl', $document->document_srl)}#trackback"><span class="trackbacks" title="Trackbacks">({$__t_count})</span></a><!--@endif-->
                                                <!--@else-->
                                                    <!--@if($__r_count)--><span class="replies" title="Replies">[{$__r_count}]</span><!--@endif-->
                                                    <!--@if($__t_count)--><span class="trackbacks" title="Trackbacks">({$__t_count})</span><!--@endif-->
                                                <!--@endif-->
                                            </span>
                                        <!--@endif-->
                                    </li>
                                    <li class="exAndSummary">
                                        <div class="categoryAndStar">
                                            <div class="category">
                                            <!--@if($arr_display_var['category']=='Y' && $module_info->use_category != "N" && $document->category_srl)-->
                                                <strong <!--@if($category_list[$document->category_srl]->color != 'transparent')-->style="color:{$category_list[$document->category_srl]->color};"<!--@endif-->>{$category_list[$document->category_srl]->title}</strong>
                                            <!--@endif-->
                                            <!--@if($arr_display_var['nick_name']=='Y'||$arr_display_var['last_updater']=='Y')-->
                                                <span class="author">
                                                    <!--@if($arr_display_var['nick_name']=='Y')-->
                                                        {@
                                                            $nick_name = $document->getNickName();
                                                            $nick_name = ($nick_name=='anonymous'?$lang->anonymous:$nick_name);
                                                            $document->member_srl = (!$grant->manager && $document->member_srl && $document->get('user_id')=='anonymous')?0:$document->member_srl;
                                                        }
                                                        <span class="{($document->member_srl?'member_'.$document->member_srl:'bodex_0'.$document->document_srl)}"{$_tmp_nick_color}>{$nick_name}</span>
                                                    <!--@endif-->
                                                    <!--@if($arr_display_var['last_updater']=='Y' && $document->last_updater)-->
                                                        <span class="last_updater " title="{$lang->last_updater}">(last by {$document->last_updater})</span>
                                                    <!--@endif-->
                                                </span>
                                            <!--@endif-->
                                            </div>
                                            <div class="star">
                                                <ul>
                                                <!--@foreach($writer_rating_list as $val)-->
                                                    {@ $writer_rating_value = (float)$document->getExtraValue($list_config[$val]->idx)}
                                                    <li>
                                                    <div class="starPointFrame fr" title="{$writer_rating_value}">
                                                        <span class="starColor{$module_info->star_color} bodexBg1" style="width:{$writer_rating_value*15}px"></span>
                                                        <i>{$writer_rating_value}</i>
                                                    </div>
                                                    <div class="fr">{$list_config[$val]->name}:&nbsp;</div>
                                                    <div class="clear"></div>
                                                    </li>
                                                <!--@endforeach-->

                                                <!--@if($module_info->use_vote == 'Y' || $module_info->use_vote == 'R')-->
                                                    <li><a href="{getUrl('document_srl',$document->document_srl, 'listStyle', $listStyle, 'cpage','')}#comment_form">
                                                        <!--@if($arr_display_var['blamed_count']=='Y')--><span class="blamed_count fr" title="{$lang->col_blame}">{$document->blamed_count}</span><!--@endif-->
                                                        <!--@if($arr_display_var['voted_count']=='Y')--><span class="voted_count fr" title="{$lang->col_vote}">{$document->voted_count}</span><!--@endif-->
                                                    </a></li>
                                                <!--@elseif($module_info->use_vote == 'S' || $module_info->use_vote == 'Z')-->
                                                    {@ $average = number_format($document->voted_count / abs($document->blamed_count),1)}
                                                    <li><a href="{getUrl('document_srl',$document->document_srl, 'listStyle', $listStyle, 'cpage','')}#comment_form">
                                                        <div class="starPointFrame fr" title="{($average?$average:'0').'/'.(abs($document->blamed_count))}">
                                                            <span class="starColor{$module_info->star_color} bodexBg1" style="width:{$average*15}px"></span>
                                                            <i>{($average?$average:'0').'/'.(abs($document->blamed_count))}</i>
                                                        </div>
                                                        <div class="fr">{$lang->user.' '.$lang->rating}:&nbsp;</div>
                                                    </a></li>
                                                <!--@endif-->
                                                </ul>
                                            </div>
                                        </div>
                                    <!--@if(count($file_list['image']) || count($file_list['binary']) || count($file_list['media']))-->
                                        {@$adopted_reward_point = ($module_info->use_reward != 'N' && $document->reward_point > 0)?$document->reward_point:0}
                                        <div class="exSkinFileListBox displayHide" rel="{$no}">
                                            <!--@if(count($file_list['image']) && $is_display_image)-->
                                                <ul>
                                                {@$downpoint = 0; $is_button = true;}
                                                <!--@foreach($file_list['image'] as $file)-->
                                                    <!--@if($module_info->use_down_point_images=='Y')-->
                                                        {@ $downpoint = (!$file->file_size)?0:(($downloaded_list[$file->file_srl]>0 || ($file->member_srl == $logged_info->member_srl))?'0':$adopted_reward_point)}
                                                    <!--@endif-->
                                                    {@ $total_down += $file->download_count}
                                                    <li style="background-image:url('{$tpl_path}images/{$module_info->colorset}/{$file->isvalid=='Y'?'iconImage':'iconError'}.gif')">
                                                        <a href="{getUrl('').$file->download_url}" {(!$file->file_size)?'target="_bodexLink"':''} onclick="return {$file->isvalid=='Y'?(($module_info->download_point_confirm=='Y')?'_exSkinDownloadConfirm(\''.$downpoint.'\')':'true'):'false'}">
                                                            <span {$file->isvalid=='Y'?($downloaded_list[$file->file_srl]>0?'class="fileDownloaded"':''):'class="fileError" title="invalid"'}>{$file->source_filename}({($file->file_size)?FileHandler::filesize($file->file_size):'link'})[{number_format($file->download_count)}]{($downpoint >0)?'($'.($downpoint).')':''}</span>
                                                        </a>
                                                    </li>
                                                <!--@endforeach-->
                                                </ul>
                                            <!--@endif-->

                                            <!--@if(count($file_list['media']) && $is_display_media)-->
                                                <ul>
                                                {@$downpoint = 0; $is_button = true;}
                                                <!--@foreach($file_list['media'] as $file)-->
                                                    <!--@if($module_info->use_down_point_medias=='Y')-->
                                                        {@ $downpoint = (!$file->file_size)?0:(($downloaded_list[$file->file_srl]>0 || ($file->member_srl == $logged_info->member_srl))?'0':$adopted_reward_point)}
                                                    <!--@endif-->
                                                    {@ $total_down += $file->download_count}
                                                    <li style="background-image:url('{$tpl_path}images/{$module_info->colorset}/{$file->isvalid=='Y'?'iconMedia':'iconError'}.gif')">
                                                        <!--@if($is_review == 'review'||$module_info->use_media_player=='Y')-->
                                                            <a href="#" onclick="{$file->isvalid=='Y'?'popupDisplayMedia(\''.$file->file_srl.'\',\''.$file->sid.'\');':''} return false">
                                                        <!--@else-->
                                                            <a href="{getUrl('').$file->download_url}" {(!$file->file_size)?'target="_bodexLink"':''} onclick="return {$file->isvalid=='Y'?(($module_info->download_point_confirm=='Y')?'_exSkinDownloadConfirm(\''.$downpoint.'\')':'true'):'false'}">
                                                        <!--@endif-->
                                                            <span {$file->isvalid=='Y'?($downloaded_list[$file->file_srl]>0?'class="fileDownloaded"':''):'class="fileError" title="invalid"'}>{$file->source_filename}({($file->file_size)?FileHandler::filesize($file->file_size):'link'})[{number_format($file->download_count)}]{($downpoint >0)?'($'.($downpoint).')':''}</span>
                                                        </a>
                                                    </li>
                                                <!--@endforeach-->
                                                </ul>
                                            <!--@endif-->

                                            <!--@if(count($file_list['binary']) && $is_display_binary)-->
                                                <ul>
                                                {@$downpoint = 0; $is_button = true;}
                                                <!--@foreach($file_list['binary'] as $file)-->
                                                    {@
                                                        $downpoint = (($downloaded_list[$file->file_srl]>0)?'0':$adopted_reward_point);
                                                        $downpoint = (!$file->file_size)?0:(($file->member_srl == $logged_info->member_srl)?'0':$downpoint+$download_file_point);
                                                        $total_down += $file->download_count;
                                                    }
                                                    <li style="background-image:url('{$tpl_path}images/{$module_info->colorset}/{$file->isvalid=='Y'?($file->direct_download =='M'?'iconMedia':'iconFile'):'iconError'}.gif')">
                                                        <a  href="{getUrl('').$file->download_url}" {(!$file->file_size)?'target="_bodexLink"':''} onclick="return {$file->isvalid=='Y'?(($module_info->download_point_confirm=='Y')?'_exSkinDownloadConfirm(\''.$downpoint.'\')':'true'):'false'}">
                                                            <span {$file->isvalid=='Y'?($downloaded_list[$file->file_srl]>0?'class="fileDownloaded"':''):'class="fileError" title="invalid"'}>{$file->source_filename}({($file->file_size)?FileHandler::filesize($file->file_size):'link'})[{number_format($file->download_count)}]{($downpoint >0)?'($'.($downpoint).')':''}</span>
                                                        </a>
                                                    </li>
                                                <!--@endforeach-->
                                                </ul>
                                            <!--@endif-->
                                        </div>

                                        <div class="fr <!--@if(!in_array($module_info->display_download_button, array('Y','L')) || !$is_button)-->displayHide<!--@endif-->">
                                            <span class="button {$btn_class}"><input class="exSkinFileListButton" rel="{$no}" type="button" value="{htmlspecialchars($module_info->download_button_caption)}" /></span>
                                        </div>
                                    <!--@endif-->
                                    <!--@if($writer_ccl_key)-->
                                        {@
                                            $writer_display_ccl = explode('|@|',$document->getExtraValue($list_config[$writer_ccl_key]->idx));
                                            $ccl['attribution'] = in_array('attribution', $writer_display_ccl)?'yes':'no';
                                            $ccl['commercial'] = in_array('commercial', $writer_display_ccl)?'yes':'no';
                                            $ccl['derivatives'] = in_array('sharealike', $writer_display_ccl)?'alike':(in_array('derivatives', $writer_display_ccl)?'yes':'no');

                                            $ccl['licenses'] = ($ccl['attribution']=='yes')?'by':'';
                                            $ccl['licenses'] .= ($ccl['commercial']=='no')?'-nc':'';
                                            $ccl['licenses'] .= ($ccl['derivatives']=='no')?'-nd':'';
                                            $ccl['licenses'] .= ($ccl['derivatives']=='alike')?'-sa':'';
                                        }
                                        <!--@if($ccl['licenses'])-->
                                        <div class="ccl">
                                            <a href="#" onclick="winopen('http://creativecommons.org/licenses/{$ccl['licenses']}/3.0/deed.{$lang_type}','cclInfo','width=800, height=600, scrollbars=yes')">
                                            <img src="./images/common/ccl_attribution_{$ccl['attribution']}.png" border="0" title="{$lang->ccl->attribution}: {Context::getLang('cmd_'.$ccl['attribution'])}" />
                                            <img src="./images/common/ccl_commercial_{$ccl['commercial']}.png" border="0" title="{$lang->ccl->commercial}: {Context::getLang('cmd_'.$ccl['commercial'])}" />
                                            <img src="./images/common/ccl_derivatives_{$ccl['derivatives']}.png" border="0" title="{$lang->ccl->derivatives}: {Context::getLang('cmd_'.$ccl['derivatives'])}" />
                                            </a>
                                        </div>
                                        <!--@endif-->
                                    <!--@endif-->
                                    <!--@foreach($extra_key_list as $val)-->
                                        <div class="extravalue">
                                            {$list_config[$val]->name}: <!--@if($is_grant || $module_info->display_secret_extravalue=='Y')-->{$oBodex->cutStrEx($document->getExtraValueHTML($list_config[$val]->idx), $module_info->content_extravalue_size)}<!--@else-->{$lang->secret}<!--@endif-->
                                        </div>
                                    <!--@endforeach-->

                                    <!--@if($arr_display_var['summary']=='Y')-->
                                        <div class="summary">
                                        <!--@if($is_grant || $module_info->display_secret_extravalue=='Y')-->
                                            {$document->getSummary($module_info->content_cut_size)}
                                        <!--@else-->
                                            {sprintf($lang->msg_act_not_permitted,$lang->col_read)}
                                        <!--@endif-->&nbsp;
                                        </div>
                                    <!--@endif-->
                                    </li>
                                </ul>
                            <div class="clear"></div>
                            </div>

                            <div class="date" <!--@if($module_info->thumbnail_position=='R')-->style="float:left;"<!--@endif-->>
                                <!--@if($is_button)--><a href="{getUrl('document_srl',$document->document_srl, 'listStyle', $listStyle, 'cpage','')}#binaryfilelist"><!--@endif-->
                                <!--@if($arr_display_var['regdate']=='Y')-->
                                    {$lang->regdate.'&nbsp;'.$document->getRegdate('Y.m.d')}&nbsp;/
                                <!--@endif-->
                                    {$lang->file_last_update.'&nbsp;'.zdate($document->last_update,'Y-m-d H:i')}
                                <!--@if($is_button)-->/ {$lang->file_total_download.'&nbsp;'.$total_down}</a><!--@endif-->
                            </div>
                        </div>
                <!--@endforeach-->
            </td>
        </tr>
    <!--@endif-->
    </tbody>
</table>
